<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Sakancom</title>
  <link href="../resources/public_html/assets/img/loyintlogos/logow.svg" rel="icon">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'><link rel="stylesheet" href="../multi-step-form/dist/style.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="../resources/css-table-15/fonts/icomoon/style.css">

  <link rel="stylesheet" href="../resources/css-table-15/css/owl.carousel.min.css">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="../resources/css-table-15/css/bootstrap.min.css">

  <!-- Style -->
  <link rel="stylesheet" href="../resources/css-table-15/css/style.css">






</head>
<body>



<nav class="navbar navbar-default navbar-trans navbar-expand-lg fixed-top " style="position: absolute; background-color: #22b3c1; height: 9.1rem; font-family: 'Poppins', sans-serif;"  >
  <div class="container">
    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarDefault"
            aria-controls="navbarDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <a href="tenantUserIndex.html" class="logo">
      <img src="Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px; ">
    </a>
    <button type="button" class="btn btn-link nav-search navbar-toggle-box-collapse d-md-none" data-toggle="collapse"
            data-target="#navbarTogglerDemo01" aria-expanded="false">
      <span class="fa fa-search" aria-hidden="true"></span>
    </button>
    <div class="navbar-collapse collapse justify-content-center" id="navbarDefault">
      <ul class="navbar-nav">
        <li class="nav-item">

          <a class="nav-link" href="viewHousesTenant.html" style="margin-left: 10px; margin-right: 10px; color: #FFFFFF; font-size: larger">Residences</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Reservetions.html" style="margin-left: 10px; margin-right: 10px;color: #FFFFFF;font-size: larger">Reservations</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="buyFurniture.html" style="margin-left: 10px; margin-right: 10px;color: #FFFFFF;font-size: larger">Furniture</a>
        </li>


        <li class="nav-item">
          <a class="nav-link" href="#" style="margin-left: 10px; margin-right: 10px; ">Log Out</a>
        </li>



      </ul>
    </div>

  </div>
</nav>





<div class="content">

  <div class="container">

    <div class="container">
      <!-- Add your paragraph here -->
      <br>
      <br>
      <br>
      <p class="styled-paragraph">Welcome to the Reservations page! This page allows you to manage and view your reservations conveniently. Here, you can find detailed information about your upcoming reservations as well as your past bookings. Stay organized and informed by accessing important details such as reservation dates, property information, and any additional services requested. Whether you're planning for an upcoming stay or reviewing your reservation history, this page provides you with all the necessary information to make your experience seamless and enjoyable.</p>

<br>
      <br>
      <p class="styled-paragraph" id="tenantInfo"></p>




      <br>
      <div class="table-responsive custom-table-responsive">
        <table class="table custom-table">
          <thead>
          <tr>
            <th scope="col">
              <label class="control control--checkbox">


              </label>
            </th>
            <th scope="col">Reservation ID</th>
            <th scope="col">Residence ID</th>
            <th scope="col">Owner Email</th>
            <th scope="col">Owner Phone Number</th>
            <th scope="col">Owner Alternate Phone Number</th>
            <th scope="col">Residence Location</th>
            <th scope="col">Residence Country-City</th>
          </tr>
          </thead>
          <tbody id="table-body-reservations">
          <!-- Rows will be dynamically generated here for reservations -->
          </tbody>
        </table>
      </div>
      <br>
      <br>
      <p class="styled-paragraph" id="evictionTime"></p>
    </div>

  </div>
</div>
<footer class="footer-distributed">

  <div class="footer-left">

    <a  class="logo">
      <img src="Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px;  ">
    </a>



    <p class="footer-company-name" style="color: #FFFFFF;padding-top: 3rem ">Sakancom Â© 2015</p>
  </div>

  <div class="footer-center">

    <div>
      <i class="fa fa-map-marker"></i>
      <p><span>Rafedyia Street</span> Nablus, Palestine</p>
    </div>

    <div>
      <i class="fa fa-phone"></i>
      <p>+972595254709</p> </br>
      <p style="padding-left: 4.5rem">+970598666558</p>
    </div>

    <div>
      <i class="fa fa-envelope"></i>
      <p><a href="mailto:yossalam261@gmail.com">yossalam261@gmail.com</a></p></br>
      <p style="padding-left: 4.5rem"><a href="mailto:mohammadaker7@gmail.com">mohammadaker7@gmail.com</a></p>
    </div>

  </div>

  <div class="footer-right">

    <p class="footer-company-about">
      <span>About the company</span>
      Sakancom offers a diverse range of rental properties to suit every budget. With a commitment to service and transparency, we make finding your perfect home easy and enjoyable
    </p>

    <div class="footer-icons">

      <a href="https://www.facebook.com/yusuf.salam.568/"><i class="fa fa-facebook"></i></a>
      <a href="https://twitter.com/YoSSalam2"><i class="fa fa-twitter"></i></a>
      <a href="https://www.linkedin.com/in/yossalam8/"><i class="fa fa-linkedin"></i></a>
      <a href="https://github.com/YoSSalam8"><i class="fa fa-github"></i></a>

    </div>

  </div>

</footer>



  <script src="../resources/css-table-15/js/jquery-3.3.1.min.js"></script>
  <script src="../resources/css-table-15/js/popper.min.js"></script>
  <script src="../resources/css-table-15/js/bootstrap.min.js"></script>
  <script src="../resources/css-table-15/js/main.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  // ... Rest of the code ...
  function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) === ' ') {
        c = c.substring(1, c.length);
      }
      if (c.indexOf(nameEQ) === 0) {
        return decodeURIComponent(c.substring(nameEQ.length, c.length));
      }
    }
    return null;
  }
  function generateReservationRow(reservation) {
    const row = document.createElement("tr");








    const reservationId = reservation.id;
    const residenceId = reservation.number;
    const ownerEmail = reservation.ownerEmail;
    const ownerPhoneNumber = '123-456-7890';
    const ownerAlternatePhoneNumber = '987-654-3210';
    const residenceLocation = 'Sample Location';
    const residenceCountryCity = 'Sample Country, Sample City';

// Create the reservationData array with the assigned values
    const reservationData = [
      reservationId,
      residenceId,
      ownerEmail,
      ownerPhoneNumber,
      ownerAlternatePhoneNumber,
      residenceLocation,
      residenceCountryCity
    ];

    $.ajax({
      url: "http://localhost:9090/user/getUser",
      data: {email:reservation.ownerEmail},
      type: "GET",
      success: function (response) {
reservationData.ownerPhoneNumber=response.phoneNumber;
reservationData.ownerAlternatePhoneNumber =response.alternatePhoneNumber;
      },
      error: function (error) {
        console.log(error);
      }
    });




    $.ajax({
      url: "http://localhost:9090/residence/test",
      data: {id:residenceId},
      type: "GET",
      success: function (response) {
reservationData.residenceLocation=response.location;
reservationData.residenceCountryCity=response.country+", "+ response.city


      },
      error: function (error) {
        console.log(error);
      }
    });





    reservationData.forEach(item => {
      const cell = document.createElement("td");
      cell.textContent = item;
      row.appendChild(cell);
    });

    // Add a checkbox for each row if needed
    const checkboxCell = document.createElement("td");
    const checkboxLabel = document.createElement("label");
    checkboxLabel.classList.add("control", "control--checkbox");
    const checkboxInput = document.createElement("input");
    checkboxInput.type = "checkbox";
    checkboxLabel.appendChild(checkboxInput);
    const checkboxIndicator = document.createElement("div");
    checkboxIndicator.classList.add("control__indicator");
    checkboxLabel.appendChild(checkboxIndicator);
    checkboxCell.appendChild(checkboxLabel);
    row.appendChild(checkboxCell);

    return row;
  }

  // ... Rest of the code ...

  $.ajax({
    url: "http://localhost:9090/rent/getTenantReservations",
    data: {email:getCookie('userEmail')},
    type: "GET",
    success: function (response) {
      const tableBodyReservations = document.getElementById("table-body-reservations"); // Get the reservation table's body
      for (let i = 0; i < response.length; i++) {
        const newRow = generateReservationRow(response[i]); // Generate the row using the reservation data
        tableBodyReservations.appendChild(newRow); // Add the row to the reservation table
      }
    },
    error: function (error) {
      console.log(error);
    }
  });



  $.ajax({
    url: "http://localhost:9090/user/getUser",
    data: {email:getCookie('userEmail')},
    type: "GET",
    success: function (response) {

document.getElementById('tenantInfo').textContent="These are the reservations for the user with an email of :"+ getCookie('userEmail')+ " and a phone number of :"+ response.phoneNumber;

      document.getElementById('evictionTime').textContent="Please note that you can begin your staying in the first of each month and the eviction time is in the 30th of that same month. You may pay the rent once you start yor staying.";

    },
    error: function (error) {
      console.log(error);
    }
  });


</script>
</body>
</html>
