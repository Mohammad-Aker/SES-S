<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>Sakancom</title>
    <link href="../resources/public_html/assets/img/loyintlogos/logow.svg" rel="icon">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
    <link rel="stylesheet" href="../multi-step-form/dist/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">




    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script>
        $(document).ready(function(){
            $(".action-button").click(function(){
                if($(this).val() === "Submit"){
                    var email = $("input[name='email']").val();
                    var pwd = $("input[name='pwd']").val();
                    var cpwd = $("input[name='cpwd']").val();
                    var fname = $("input[name='fname']").val();
                    var lname = $("input[name='lname']").val();
                    var phno = $("input[name='phno']").val();
                    var phno_2 = $("input[name='phno_2']").val();
                    var major = $("input[name='major']").val();
                    var workplace = $("#workplace").val();
                    var age = $("input[name='Age']").val();
                    var type = $("#Type").val();

                    var formData = {
                        email: email,
                        password: pwd,
                        firstName: fname,
                        lastName: lname,
                        phoneNumber: phno,
                        alternatePhoneNumber: phno_2,
                        universityMajor: major,
                        workplace: workplace,
                        age: age,
                        userType: 0
                    };

                    $.ajax({
                        url: 'localhost:9090/user/saveUser',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(formData),
                        dataType: 'json',
                        success: function (data) {
                            console.log('Form submitted successfully. Returned data: ', data);
                        },
                        error: function (request, status, error) {
                            console.error('Error: ', error);
                        }
                    });
                }
            });
        });
    </script>
</head>



<body>


<nav class="navbar navbar-default navbar-trans navbar-expand-lg fixed-top " style="position: absolute">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarDefault"
                aria-controls="navbarDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <a href="../../index.html" class="logo">
            <img src="../multi-step-form/dist/Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px;  ">
        </a>
        <button type="button" class="btn btn-link nav-search navbar-toggle-box-collapse d-md-none" data-toggle="collapse"
                data-target="#navbarTogglerDemo01" aria-expanded="false">
            <span class="fa fa-search" aria-hidden="true"></span>
        </button>
        <div class="navbar-collapse collapse justify-content-center" id="navbarDefault">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../Houses/index.html" style="margin-left: 700px; margin-right: 5px; font-size: 20px ">Home</a>
                </li>
            </ul>
        </div>

    </div>
</nav>





<!-- partial:index.partial.html -->
<div class="container-fluid" style="padding-top: 10rem;">
    <div class="row justify-content-center">
        <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
            <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                <h2 id="heading">Create your account!</h2>
                <p>Fill all form field to go to next step</p>
                <form id="msform">
                    <!-- progressbar -->
                    <ul id="progressbar">
                        <li class="active" id="account"><strong>Verify Information</strong></li>


                        <li id="confirm"><strong>Finish</strong></li>
                    </ul>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                    </div> <br> <!-- fieldsets -->
                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Account Information:</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 1 - 2</h2>
                                </div>

                            </div>
                                <label class="fieldlabels">Email Tenant: *</label> <input type="email" id="email1" name="email1" placeholder="Email Tenant" oninput="validateEmail()"/> <p id="emailError" style="color: red">

                            </p> <label class="fieldlabels">Email Owner: *</label> <input type="email" id="email2" name="email2" placeholder="Email Owner" />

                            <label class="fieldlabels">ID: *</label> <input type="number" id="ID" name="ID" placeholder="ID" />

                            <label class="fieldlabels">Rent Date: *</label> <input type="month" name="rentDate" id="rentDate" onchange="checkMonth()" placeholder="RentDate"   />

                            <label class="fieldlabels">For How Many Month: *</label> <input type="number" name="no_Month" id="no_Month" placeholder="End Date" />







                        </div> <input type="button" name="next" class="next action-button" value="Submit" style="margin-top: 10px" />

                    </fieldset>




                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Finish:</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 2-2</h2>
                                </div>
                            </div> <br><br>
                            <h2 class="purple-text text-center"><strong>SUCCESS !</strong></h2> <br>
                            <div class="row justify-content-center">
                                <div class="col-3"> <img src="https://t4.ftcdn.net/jpg/02/72/79/67/360_F_272796737_1gfclSQF8yzFHZeE2XX5513eOQMV53dw.jpg" class="fit-image"> </div>
                            </div> <br><br>
                            <div class="row justify-content-center">
                                <div class="col-7 text-center">
                                    <h5 class="purple-text text-center">You Have Successfully Signed Up</h5>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<footer class="footer-distributed">

    <div class="footer-left">

        <a  class="logo">
            <img src="Screenshot_2023-07-02_at_13.13.32-removebg.png" alt="" style="width: 250px;  ">
        </a>



        <p class="footer-company-name" style="color: #FFFFFF;padding-top: 3rem ">Sakancom Â© 2015</p>
    </div>

    <div class="footer-center">

        <div>
            <i class="fa fa-map-marker"></i>
            <p><span>Rafedyia Street</span> Nablus, Palestine</p>
        </div>

        <div>
            <i class="fa fa-phone"></i>
            <p>+972595254709</p> </br>
            <p style="padding-left: 4.5rem">+970598666558</p>
        </div>

        <div>
            <i class="fa fa-envelope"></i>
            <p><a href="mailto:yossalam261@gmail.com">yossalam261@gmail.com</a></p></br>
            <p style="padding-left: 4.5rem"><a href="mailto:mohammadaker7@gmail.com">mohammadaker7@gmail.com</a></p>
        </div>

    </div>

    <div class="footer-right">

        <p class="footer-company-about">
            <span>About the company</span>
            Sakancom offers a diverse range of rental properties to suit every budget. With a commitment to service and transparency, we make finding your perfect home easy and enjoyable
        </p>

        <div class="footer-icons">

            <a href="https://www.facebook.com/yusuf.salam.568/"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/YoSSalam2"><i class="fa fa-twitter"></i></a>
            <a href="https://www.linkedin.com/in/yossalam8/"><i class="fa fa-linkedin"></i></a>
            <a href="https://github.com/YoSSalam8"><i class="fa fa-github"></i></a>

        </div>

    </div>

</footer>
<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script><script  src="../multi-step-form/dist/script.js"></script>
<!--
<script>


    function checkMonth() {
        const monthInput = document.getElementById('rentDate');
        const selectedMonth = new Date(monthInput.value);

        // Suppose we want to disable January and February
        if (selectedMonth.getMonth() > 2) {
            alert("This month is not selectable. Please choose a different month.");
            monthInput.value = '';
        }
    }
</script>
-->
<script>

    function checkMonth() {
        // Get the value from the input field
        var rentDate = document.getElementById("rentDate").value;

        // Extract the year and month from the input field value
        var year = rentDate.slice(0,4);
        var month = rentDate.slice(5,7);
        var rentDateString = `${year}-${month.padStart(2, '0')}`;

        // AJAX request: Get the rent date for the rent with ID 3
        $.ajax({
            url: "http://localhost:9090/rent/getRentDate",
            type: "GET",
            data: {
                id: 3  // Pass the id as a query parameter
            },
            success: function(rentDateWithId3) {
                // Extract the month from the rent date with ID 3
                var monthFromRentWithId3 = rentDateWithId3.slice(5,7);
                var yearFromRentWithId3= rentDateWithId3.slice(0,4)
                // Check if the entered month is the same as the month from the rent date with ID 3
                if (monthFromRentWithId3 == month) {
                    if (yearFromRentWithId3==year) {
                        alert("This month is already taken. Please choose a different month.");
                        // Reset the value of the input field
                        document.getElementById("rentDate").value = "";
                    }
                }
            },
            error: function(error) {
                console.log(error);
            }
        });
    }
</script>




<script>

    $(document).ready(function(){
        $(".action-button").click(function(){
            if($(this).val() === "Submit") {
                var email1 = $("input[name='email1']").val();
                var email2 = $("input[name='email2']").val();
                var id = $("input[name='ID']").val();
                var Date = $("input[name='rentDate']").val();
                var month = $("input[name='no_Month']").val();


                var formData = {
                    email: email1,
                    ownerEmail: email2,
                    date: Date,
                    number:id,
                    noMonth:month,

                };

                $.ajax({
                    url: 'http://localhost:9090/rent/saveRent',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                   
                    success: function (data) {
                        console.log('Form submitted successfully. Returned data: ', data);
                    },
                    error: function (request, status, error) {
                        console.error();
                    }
                });
            }
        });
    });
</script>


</body>
</html>
